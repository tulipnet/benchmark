
var ui_wep_4_key=1;ui_wep_4_key=0;var DUAL_WL_DESC=0;var DUAL_WL_BAND=1;var DUAL_WL_RATE=2;var DUAL_WL_CHAN=3;var BGN_Channels={0:"1,2,3,4,5,6,7,8,9,10,11",1:"1,2,3,4,5,6,7,8,9,10,11,12,13",2:"10,11",3:"10,11,12,13",4:"14",5:"1,2,3,4,5,6,7,8,9,10,11,12,13,14",6:"3,4,5,6,7,8,9",7:"5,6,7,8,9,10,11,12,13"};var AN_Channels={0:'36,40,44,48,52,56,60,64,149,153,157,161,165',1:'36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128,132,136,140',2:'36,40,44,48,52,56,60,64',3:'52,56,60,64,149,153,157,161',4:'149,153,157,161,165',5:'149,153,157,161',6:'36,40,44,48',7:'36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128,132,136,140,149,153,157,161,165',8:'52,56,60,64',9:'36,40,44,48,52,56,60,64,100,104,108,112,116,132,136,140,149,153,157,161,165',10:'36,40,44,48,149,153,157,161',11:'36,40,44,48,52,56,60,64,100,104,108,112,116,120,149,153,157,161'};var DUAL_MODE={0:['2.4GHz',0,'99,4,6,9',BGN_Channels],1:['5GHz',1,'99,2,11,8',AN_Channels]};if("undefined"==typeof(skippass)){<%CFG_MAP(wifi_en,WIFI_EN);%><%CFG_MAP(wifi_region,WIFI_REGION_BGN);%><%CFG_MAP(wifi_wirelessmode,WIFI_WIRELESSMODE);%><%CFG_MAP(wifi_fixedtxmode,WIFI_FIXEDTXMODE);%><%CFG_MAP(wifi_ssid,WIFI_SSID);%><%CFG_MAP(wifi_ssid_hide,WIFI_SSID_HIDE);%><%CFG_MAP(wifi_chan,WIFI_CHAN);%><%CFG_MAP(wifi_curchan,STS_WIFI_CHAN);%><%CFG_MAP(wifi_autochsel,WIFI_AUTOCHSEL);%><%CFG_MAP(wifi_basicrate,WIFI_BASICRATE);%><%CFG_MAP(wifi_ex_wchan,WIFI_EXT_CHAN);%><%CFG_MAP(wifi_40mch,WIFI_40MCH);%><%CFG_MAP(bandwidth,WIFI_HT_BW);%><%CFG_MAP(wifi_protectmode,WIFI_BG_PROTECT);%><%CFG_MAP(wmmenable,WIFI_WME_EN);%><%CFG_MAP(wifi_country,WIFI_COUNTRY);%><%CFG_MAP(wifi_radius,WIFI_WPA_RADIUS);%><%CFG_MAP(wifi_authmode,WIFI_AUTHMODE);%><%CFG_MAP(wifi_encryptype,WIFI_ENCRYPTYPE);%><%CFG_MAP(wifi_wep_keyidx,WIFI_WEP_KEYIDX);%><%CFG_MAP(wifi_wep_keylen,WIFI_WEP_KEYLEN);%><%CFG_MAP(wifi_wep_keymode,WIFI_WEP_KEYMODE);%><%CFG_MAP_ARY(wifi_wep_key,WIFI_WEP_KEY,4,1);%><%CFG_MAP_ARY(wifi_wep64_key,WIFI_WEP64_KEY,4,1);%><%CFG_MAP(wifi_wep128_key,WIFI_WEP128_KEY,4,1);%><%CFG_MAP(wifi_wpa_obscure,WIFI_WPA_OBSCURE);%><%CFG_MAP_ARY(wifi_wpa_key,WIFI_WPA_KEY,4,1);%><%CFG_MAP(wps_version2,WIFI_WPS_VERSION2);%><%CFG_MAP(wps_en,WIFI_WPS_EN);%><%CFG_MAP(wps_en1,WIFI_WPS_EN+1);%><%CFG_MAP(wps_pin,WIFI_WPS_PIN);%><%CFG_MAP(wps_pin_try,STS_WIFI_WPS_PIN_SET);%><%CFG_MAP(wps_hw_btn,WIFI_WPS_BTN_EN);%><%CFG_MAP_ARY(wps_config_command,STS_WIFI_WPS_CFG)%><%CFG_MAP_ARY(wps_p_state,STS_WIFI_WPS_STATE)%><%CFG_MAP(wps_configured,WIFI_WPS_CONFIGED);%><%CFG_MAP(wifi_en1,WIFI_EN+1);%><%CFG_MAP(wifi_region1,WIFI_REGION_AN);%><%CFG_MAP(wifi_wirelessmode1,WIFI_5G_WIRELESSMODE);%><%CFG_MAP(wifi_fixedtxmode1,WIFI_5G_FIXEDTXMODE);%><%CFG_MAP(wifi_ssid1,WIFI_5G_SSID);%><%CFG_MAP(wifi_ssid_hide1,WIFI_5G_SSID_HIDE);%><%CFG_MAP(wifi_chan1,WIFI_5G_CHAN);%><%CFG_MAP(wifi_curchan1,STS_WIFI_CHAN+1);%><%CFG_MAP(wifi_autochsel1,WIFI_5G_AUTOCHSEL);%><%CFG_MAP(wifi_basicrate1,WIFI_5G_BASICRATE);%><%CFG_MAP(wifi_ex_wchan1,WIFI_5G_EXT_CHAN);%><%CFG_MAP(wifi_40mch1,WIFI_40MCH+1);%><%CFG_MAP(bandwidth1,WIFI_5G_HT_BW);%><%CFG_MAP(wifi_protectmode1,WIFI_5G_PROTECT);%><%CFG_MAP(wmmenable1,WIFI_5G_WME_EN);%><%CFG_MAP(wifi_country1,WIFI_5G_COUNTRY);%><%CFG_MAP(wifi_radius1,WIFI_5G_WPA_RADIUS);%><%CFG_MAP(wifi_authmode1,WIFI_5G_AUTHMODE);%><%CFG_MAP(wifi_encryptype1,WIFI_5G_ENCRYPTYPE);%><%CFG_MAP(wifi_wep_keyidx1,WIFI_5G_WEP_KEYIDX);%><%CFG_MAP(wifi_wep_keylen1,WIFI_5G_WEP_KEYLEN);%><%CFG_MAP(wifi_wep_keymode1,WIFI_5G_WEP_KEYMODE);%><%CFG_MAP_ARY(wifi_wep_key1,WIFI_5G_WEP_KEY,4,1);%><%CFG_MAP_ARY(wifi_wep64_key1,WIFI_5G_WEP64_KEY,4,1);%><%CFG_MAP(wifi_wep128_key1,WIFI_5G_WEP128_KEY,4,1);%><%CFG_MAP(wifi_wpa_obscure1,WIFI_5G_WPA_OBSCURE);%><%CFG_MAP_ARY(wifi_wpa_key1,WIFI_5G_WPA_KEY,4,1);%><%CFG_MAP(wps_unit,STS_WIFI_WPS_UNIT);%><%CFG_MAP(wps_method,STS_WIFI_WPS_METHOD);%><%CFG_MAP(wps_configured1,WIFI_WPS_CONFIGED+1);%><%CFG_MAP(enable_TKIP_n,WIFI_TKIP_EN_N);%>var from_wifi=(parseInt('0'+'<%CGI_ACCESS_FROM();%>')==3);<%CFG_MAP(same,WIFI_SAME_SET);%>}
var wifi_pg={'000':"wifi_no_sc.htm",'010':"wifi_wep64.htm",'011':"wifi_wep128.htm",'012':"wifi_wep152.htm",'020':"wifi_psk.htm",'030':"wifi_psk.htm",'040':"wifi_psk.htm",'110':"wifi_wpa.htm",'120':"wifi_wpa.htm",'120':"wifi_wpa.htm"}
var wifi_mod_s={0:"802.11 b/g mixed",1:"802.11 b",2:"802.11 a",3:"802.11 a/b/g mixed",4:"802.11 g",5:"802.11 a/b/g/n mixed",6:"802.11 n",7:"802.11 g/n mixed",8:"802.11a & 802.11n",9:"802.11b & 802.11g & 802.11n",10:"802.11 a/g/n",11:"802.11 n",99:"Off"};var wifi_rate_s=["1","2","5.5","11","6","9","12","18","24","36","48","54"];var wifi_sc_s={0:'318',1:'804',2:'803',3:'WPA-PSK',4:'WPA2-PSK',5:'1296',6:'WPA',7:'WPA2',8:'1297'};var bit_s={1:'64bit',2:'128bit',3:'152bit'};var encry_s={0:'',1:'TKIP',2:'AES',3:'TKIP+AES'};function get_wifi_baserate(idx){var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);var v=getCfg("wifi_wirelessmode"+k);return v;}
function set_wifi_baserate(idx,v){var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);var sc_mod=0;var vv=parseInt(v,10);if(vv==99){setCfg("wifi_en"+k,"0");}else{setCfg("wifi_wirelessmode"+k,vv);setCfg("wifi_en"+k,"1");if(vv==6||vv==9){setCfg("wifi_fixedtxmode"+k,'HT');setCfg("wifi_basicrate"+k,"15");}else if(vv==4){setCfg("wifi_fixedtxmode"+k,'OFDM');setCfg("wifi_basicrate"+k,"351");}}}
function get_wifi_channel(idx){var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);var v=getCfg("wifi_chan"+k);if(getCfgInt("wifi_autochsel"+k)==1)v=0;return v;}
function set_wifi_channel(idx,v){var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);var vv=parseInt(v,10);if(v==0)
setCfg("wifi_autochsel"+k,"1");else{setCfg("wifi_autochsel"+k,"0");setCfg("wifi_chan"+k,vv);}}
function get_wifi_extchannel(idx){var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);var v=getCfg("wifi_ex_wchan"+k);return v;}
function set_wifi_extchannel(idx,v){var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);if(v!=null)
setCfg("wifi_ex_wchan"+k,v);}
function get_wifi_chan_list(idx){var k=DUAL_MODE[idx][DUAL_WL_BAND];var ch_s=DUAL_MODE[idx][DUAL_WL_CHAN];var ch_all,ch_lst=[];k=((k==0)?'':k);var wifi_reg=getCfgInt("wifi_region"+k);ch_lst.push({desc:getLangM(377),key:0});var ch_all=ch_s[wifi_reg].split(",");for(var x in ch_all){if(!x||!ch_all[x])break;ch_lst.push({desc:ch_all[x],key:ch_all[x]});}
return ch_lst;}
function get_wifi_ssidbcst(idx){var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);var v=(getCfgInt("wifi_ssid_hide"+k)==1)?"0":"1";return v;}
function set_wifi_ssidbcst(idx,v){var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);if(v==1)
setCfg("wifi_ssid_hide"+k,"0");else{setCfg("wifi_ssid_hide"+k,"1");setCfg("wps_en"+k,"0");}}
function get_wifi_ssid(idx){var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);return getCfg("wifi_ssid"+k);}
function set_wifi_ssid(idx,v){var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);var obj=getCfgObj("wifi_ssid"+k);var o=obj.o;var n=setCfg("wifi_ssid"+k,v);return(n!=o);}
function get_wifi_authcfg(idx){var sc_mod=0;var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);var auth=getCfg("wifi_authmode"+k);if(auth=='OPEN')
sc_mod=0;else if(auth=='WEPAUTO'){sc_mod=2;if(parseInt(getCfg("wifi_wep_keylen"+k),10)==10)
sc_mod=1;}else if(auth=='WPAPSK')
sc_mod=3;else if(auth=='WPA2PSK')
sc_mod=4;else if(auth=='WPAPSKWPA2PSK')
sc_mod=5;else if(auth=='WPA')
sc_mod=6;else if(auth=='WPA2')
sc_mod=7;else if(auth=='WPAWPA2')
sc_mod=8;return sc_mod;}
function set_wifi_authcfg(idx,_mod,_key){var sc_mod=0;var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);switch(_mod)
{case 0:default:setCfg("wifi_radius"+k,'0');setCfg("wifi_authmode"+k,"OPEN");setCfg("wifi_encryptype"+k,"NONE");break;case 1:wep=getWEPAry(idx);wep[WEP_MOD]=(_key.length==10)?1:2;wep[WEP_KEY]=0;wep[WEP_PHAS]=0;wep[WEP_KEYSZ]=_key.length;if(_key.length==10)
wep[WEP_KEYS+1]=_key;else
wep[WEP_KEYS]=_key;setWEPAry(idx,wep);break;case 3:case 2:var wifi_mode=get_wifi_baserate(idx);var wpa=getWPACfg(idx);wpa[WPA_MOD]=_mod;wpa[WPA_PSK]=1;wpa[WPA_PH]=1;wpa[WPA_OBS]=1;wpa[WPA_KEY]=_key;setWPACfg(idx,wpa);}}
function get_wifi_uimode(idx){var sc_mod=get_wifi_authcfg(idx);if(sc_mod==3||sc_mod==4)
sc_mod=5;return sc_mod;}
function get_wifi_uiencry(idx){var mod=0;var k=DUAL_MODE[idx][DUAL_WL_BAND];k=((k==0)?'':k);var encry=getCfg("wifi_encryptype"+k);if(encry=='TKIP')
mod=1;else if(encry=='AES')
mod=2;else if(encry=='TKIPAES')
mod=3;return mod;}
function get_wifi_sc_str(mod){return getLangC(wifi_sc_s[mod]);}
function getwifi_sc(idx){var wifi_sc=get_wifi_uimode(idx);return get_wifi_sc_str(wifi_sc);}
function getwifi_encry(idx){var wifi_sc=get_wifi_uimode(idx);if(wifi_sc!=5){return'';}
var encry=get_wifi_uiencry(idx);var wifi_mode=get_wifi_baserate(idx);var en_TKIP_n=getCfgInt("enable_TKIP_n");if((wifi_mode>=5)&&(wifi_mode<=11)&&(en_TKIP_n==0))
encry=2;return encry_s[encry];}
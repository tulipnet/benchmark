<!DOCTYPE html><!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"lang="en"> <![endif]--><!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"lang="en"> <![endif]--><!--[if IE 8]> <html class="no-js lt-ie9"lang="en"> <![endif]--><!--[if gt IE 8]><!--><html lang="en"class="gt-ie8"><!--<![endif]--><!--[if IE]><html xmlns="http://www.w3.org/1999/xhtml"xmlns:v><![endif]--><head><meta charset="utf-8"/><meta name="viewport"content="width=device-width"/><title></title> <link rel="icon"href="images/favicon/favicon.ico"><link rel="apple-touch-icon-precomposed"sizes="144x144"href="images/favicon/belkin_144.png"><link rel="apple-touch-icon-precomposed"sizes="114x114"href="images/favicon/belkin_114.png"><link rel="apple-touch-icon-precomposed"sizes="72x72"href="images/favicon/belkin_72.png"><link rel="apple-touch-icon-precomposed"href="images/favicon/belkin_57.png"><link rel="stylesheet"href="stylesheets/app.css?t=20140212"><!--[if lt IE 9]><link rel="stylesheet"href="stylesheets/ie.css"><![endif]--><!--[if IE]><?import namespace="v"implementation="#default#VML"?><![endif]--><script>var LangJ=["menulist","help","comm","fw_pic","status"];var CGIs=["pic","st"];</script><script src="javascripts/init.js"></script><script src="javascripts/global.js"></script><script src="javascripts/menu.js"></script><script src="javascripts/jquery.min.js"></script><script src="javascripts/jQueryRotateCompressed.2.2.js"></script><script src="javascripts/routine.js"></script><script src="javascripts/app.js"></script></head><body style="display:none"id="mainbody"> <script><%CGI_INCLUDE(javascripts/main_header.js);%></script><div class="main container"id="PIC-S1"> <div class="row"><div class="content eight columns"> <div class="page-title2 hide-on-phones"> <h3 tid="gtPIC"></h3> </div><div id="PIC_noTimeWarning"class="ancillary warning withtop"style="display:none"> <h5 tid="PIC-S1t020"></h5> <p tid="PIC-S1t021"></p> <p tid="PIC-S1t022"></a>.</p> </div><div id="PIC_BlockAllInfo"class="PICBlockAllOff"style="display:none"> <a class="button nice radius green"href="#block"id="PIC_blockall"tid="PIC-S1t001"></a> </div> <div id="PIC_UnblockAllInfo"class="PICBlockAllOn"style="display:none"> <p tid="PIC-S1t003"></p> <a class="button nice radius white"href="#unblock"id="PIC_unblockall"tid="PIC-S1t004"></a> </div> <div id="PC_list"> <div id="arp_wait"> <h3 class="PICListHeader"id="PIC-S1t010"tid="PIC-S1t010"></h3> <img class="PICLoading"id="PICLoadingImg"src="images/loading.gif"> </div><div id="ON_PC"> <div class="row"> <div class="twelve columns"> <h3 class="PICListHeader"id="PIC-S1t005"tid="PIC-S1t005"style="display:none"></h3> <ul id="UL_ON_PC"class="PICOnNet"></ul> </div> </div> </div><div id="OFF_PC"> <div class="row"id="PIC_recent"style="display:none"> <div class="twelve columns"> <h3 class="PICListHeader"id="PIC_S1t006"tid="PIC_S1t006"></h3> <ul id="UL_OFF_PC"class="PICOffNet"></ul> </div> </div> </div> </div> </div><div class="sidebar four columns"> <div><div id="htPICUnblocked"style="display:none"> <h6><span tid="htPIC"></span></h6> <p> <span tid="htPICContent"></span> <span class="nub"> </span> </p> </div><div id="htPICBlocked"style="display:none"> <h3 class="PICListHeader"><span tid="htPICBlocked"></span></h3> <p> <span tid="htPICBlockedContent"></span> <span class="nub"> </span> </p> </div> </div> </div> <form class="nice"name="tF"method="post"action="/cgi-bin/setup_pic.exe"target="OUTfrm"></form></div> </div><div id="PIC-S1d"class="large reveal-modal"style="display:none"> <span tid="PIC-S1dt001"></span></p> <br> <a href="#yes"class="nice radius button green large"tid="gtYes"id="PIC-S1da001"></a> <a href="#no"class="nice radius button white large"tid="gtNo"id="PIC-S1da002"></a> </div><script>/*JS_PACKER*/var PC_seq=[];var do_sync=0;var sync_timer;function sync_PICM(){if(do_sync)return false;clearTimeout(sync_timer);do_sync=1;reload_cgi(["pic"],function(){var PICM;for(var seq=0;seq<devs_lst;seq++){PICM=PC_seq[seq];if(PICM.idx==-1){PIC=findPICByMac(PICM.mac);PICM.idx=PIC.idx;}
if((PICM.idx!=-1)&&(PICM.inedit==0)){PIC=findPICByMac(PICM.mac);PICM.host=PIC.host;PICM.hostlabel=PIC.hostlabel;PICM.block=PIC.block;PICM.is_null=PIC.is_null;PICM.issched=PIC.issched;PICM.force=PIC.force;}
show_BlockIcon(seq,PICM.block);if(PICM.inprogress==1)
{$('#'+PICM.ui.hostName.txt).html(PICM.hostlabel);SetFieldValue(PICM.ui.form.host,PICM.hostlabel);show_SchIcon(seq,!PICM.issched);$('#'+PICM.ui.toggle.detail).html("");if(PICM.cbsave)
PICM.cbsave(seq);PICM.cbsave=null;PICM.inedit=0;PICM.inprogress=0;}
if(PICM.inprogress==2){PICM.inprogress=1;}
PC_seq[seq]=PICM;}
ShowPICMode();do_sync=0;sync_timer=setTimeout("sync_PICM()",3*1000);});}
function UI_addClass(id,css){var old=$I(id).className;if(old.indexOf(css)==-1){$("#"+id).addClass(css);}}
function UI_removeClass(id,css){var old=$I(id).className;if(old.indexOf(css)!=-1){$("#"+id).removeClass(css);}}
function En_Disable_form(seq,disable){var PICM=PC_seq[seq];if(disable){DisableObject(PICM.ui.form.sn_s);DisableObject(PICM.ui.form.sn_e);DisableObject(PICM.ui.form.we_s);DisableObject(PICM.ui.form.we_e);DisableObject(PICM.ui.form.sch);DisableObject(PICM.ui.form.host);}else{EnableObject(PICM.ui.form.sn_s);EnableObject(PICM.ui.form.sn_e);EnableObject(PICM.ui.form.we_s);EnableObject(PICM.ui.form.we_e);EnableObject(PICM.ui.form.sch);EnableObject(PICM.ui.form.host);}}
function show_BlockIcon(seq,_block){var allblock=getCfgInt("pic_mod");var onoff_s=getLangAM(["PIC_S1t007","PIC_S1t008"]);var PICM=PC_seq[seq];var block=0;var icon='images/btn-Unblocked.png';if(allblock){$('#'+PICM.ui.block.icon).css("visibility","hidden");$('#'+PICM.ui.block.txt).html(onoff_s[1]);}else{if(_block==PIC_ST_ACTION||PICM.inprogress){UI_addClass(PICM.ui.entry.id,"PICInactive");En_Disable_form(seq,1);}else{UI_removeClass(PICM.ui.entry.id,"PICInactive");En_Disable_form(seq,0);if(_block==1){icon='images/btn-Blocked_x.png';block=1;}
$('#'+PICM.ui.block.icon).attr("src",icon);$('#'+PICM.ui.block.txt).html(onoff_s[block]);}
$('#'+PICM.ui.block.icon).css("visibility","visible");}}
function ReloadPIC(){setTimeout(function(){window.location.reload(true);},2*1000);}
function evaltF_Blockall(){var f=document.tF;setCfg("pic_mod","1");return subForm({frm:f,cmd:"PIC_CONF",wizard:1,wait:0,done:sync_PICM});}
function evaltF_noBlockall(){var f=document.tF;setCfg("pic_mod","0");return subForm({frm:f,cmd:"PIC_CONF",wait:0,wizard:1,done:sync_PICM});}
function evaltF_TurnOnOff(seq){var allblock=getCfgInt("pic_mod");var PICM=PC_seq[seq];var errmsg=getLangM("PIC_S1t011")+':'+MAX_PIC_NUM;var idx=PICM.idx;if(allblock)return false;if(!PICM){alert(errmsg);return false;}
if(PICM.inedit!=0)
return false;if((PICM.inprogress!=0)||(PICM.force==PIC_ST_ACTION)){return false;}
PICM.inprogress=3;var f=PICM.ui.form.obj;if(PICM.force==0)
{PICM.force=-1;}else{PICM.force=0;}
PC_seq[seq]=PICM;set_PICM(PICM);$("#"+PICM.ui.entry.id).addClass("PICInactive");return subForm({frm:f,cmd:"PIC_CONF",wait:3,wizard:1,done:function(){PICM.inprogress=0;setTimeout("sync_PICM()",10);}});return false;}
function cb_save(seq){var PICM=PC_seq[seq];UI_removeClass(PICM.ui.entry.id,"PICInactive");$('#'+PICM.ui.save.msg).slideDown();$('#'+PICM.ui.save.msg).html(PICM.hostlabel+' '+getLangM('gtSaved'));setTimeout(function(){$('#'+PICM.ui.save.msg).slideUp();},3000);}
function evaltF_Save(seq){var PICM=PC_seq[seq];var f=PICM.ui.form.obj;if((PICM.inprogress!=0)||(PICM.inedit==0)||(PICM.force==PIC_ST_ACTION)){return false;}
PICM.sn_st=getFieldValue(PICM.ui.form.sn_s);PICM.sn_ed=getFieldValue(PICM.ui.form.sn_e);PICM.we_st=getFieldValue(PICM.ui.form.we_s);PICM.we_ed=getFieldValue(PICM.ui.form.we_e);PICM.issched=getFieldIntVal(PICM.ui.form.sch);PICM.host=getFieldValue(PICM.ui.form.host);PICM.hostlabel=fixHostLabel(PICM.mac,PICM.host);set_PICM(PICM);TogglePICinfo(seq,0);PC_seq[seq]=PICM;PICM.inedit=1;PICM.inprogress=3;UI_addClass(PICM.ui.entry.id,"PICInactive");return subForm({frm:f,cmd:"PIC_CONF",wait:10,wizard:1,done:function(){PICM.cbsave=cb_save;PICM.inprogress=2;setTimeout("sync_PICM()",10);}});}
function ShowPICMode(){var block=getCfgInt("pic_mod");if(block){HiddenObject("PIC_BlockAllInfo");HiddenObject("htPICUnblocked");DisplayObject("PIC_UnblockAllInfo");DisplayObject("htPICBlocked");}else{HiddenObject("PIC_UnblockAllInfo");HiddenObject("htPICBlocked");DisplayObject("PIC_BlockAllInfo");DisplayObject("htPICUnblocked");}}
var pc_alive=null;function isAlive(_ip){if(pc_alive){return(pc_alive[_ip])?1:0;}
return 1;}
function Toggle_schedule(seq){var PICM=PC_seq[seq];var obj_id='#'+PICM.ui.toggle.detail+'>table';var sch_obj=PICM.ui.form.sch;var sched=getFieldIntVal(sch_obj);if(!sched){$(obj_id).addClass("PICInactive");}else{$(obj_id).removeClass("PICInactive");}
show_SchIcon(seq,!sched);}
function show_SchIcon(seq,off){var PICM=PC_seq[seq];var dev_id=PICM.dev_id;var icon='<img id="'+PICM.onoff+dev_id+'_clockIcon" src="images/Icon_clock.png" class="PICStatusIcon" alt="Clock">';if(off)icon='';$('#'+PICM.ui.sch.icon).html(icon);}
var OLD_seq=-1;function TogglePICinfo(seq,flag){if(seq<0)return false;var PICM=PC_seq[seq];var obj=PICM.ui.toggle.detail;var arrow=PICM.ui.toggle.icon;var ishid=$('#'+obj).is(":hidden");if("undefined"!=typeof(flag)){ishid=flag;}
if(ishid){HiddenObject(PICM.ui.hostName.txt);DisplayObject(PICM.ui.hostName.input);$('#'+obj).slideDown();$('#'+arrow).rotate({animateTo:-180,duration:600});}else{HiddenObject(PICM.ui.hostName.input);DisplayObject(PICM.ui.hostName.txt);PICM.inedit=0;PC_seq[seq]=PICM;sync_PICM();$('#'+obj).slideUp();$('#'+arrow).rotate({animateTo:-0,duration:600});}}
var chk_itms=[];function showPICInfo(seq){var PICM=PC_seq[seq];var objinfo=$('#'+PICM.ui.toggle.detail);if((PICM.inprogress!=0)||(PICM.force==PIC_ST_ACTION)){return false;}
var h='';var dev_id=PICM.dev_id;if(objinfo.html()==''){h='<label>'+'<input type="checkbox" name="'+PICM.onoff+dev_id+'_ToggleSched" onClick="Toggle_schedule('+seq+')" value="1" NOCHECK="0" onchange="chg_chk('+seq+')"><span class="PICAllowSched lspace5" tid="PIC_S1t0006">'+getLangM('PIC_S1t0006')+'</span> '+'</label>'+'<table class="PICSel">'+'<tbody>'+'<tr>'+'<td colspan="2">'+'<h6 class="PICHeader"><span tid="PIC_S2t003">'+getLangM('PIC_S2t003')+'</span> <span class="info" tid="PIC_S2t005">'+getLangM('PIC_S2t005')+'</span>:</h6>'+'</td>'+'</tr>'+'<tr>'+'<td class="right-align" width="50px">'+'<span class="PICSelHeader" tid="gtFrom">'+getLangM("gtFrom")+'</span>'+'</td>'+'<td>'+'<select name="'+PICM.onoff+dev_id+'_SNFrom" onchange="chgSNF(0,'+seq+')"></select>'+'</td>'+'</tr>'+'<tr>'+'<td class="right-align" width="50px">'+'<span class="PICSelHeader" tid="gtTo">'+getLangM("gtTo")+'</span>'+'</td>'+'<td>'+'<select name="'+PICM.onoff+dev_id+'_SNTo" onchange="chg_chk('+seq+')"></select>'+'</td>'+'</tr>'+'</tbody></table>'+'<table class="PICSel spacer7">'+'<tbody><tr>'+'<td colspan="2">'+'<h6 class="PICHeader"><span tid="PIC_S2t004">'+getLangM('PIC_S2t004')+'</span> <span class="info" tid="PIC_S2t006">'+getLangM("PIC_S2t006")+'</span>:</h6>'+'</td>'+'</tr><tr>'+'<td class="right-align" width="50px">'+'<span class="PICSelHeader" tid="gtFrom">'+getLangM("gtFrom")+'</span>'+'</td>'+'<td>'+'<select name="'+PICM.onoff+dev_id+'_WEFrom" onchange="chgSNF(1,'+seq+')"></select>'+'</td>'+'</tr>'+'<tr>'+'<td class="right-align" width="50px">'+'<span class="PICSelHeader" tid="gtTo">'+getLangM("gtTo")+'</span>'+'</td>'+'<td>'+'<select name="'+PICM.onoff+dev_id+'_WETo" onchange="chg_chk('+seq+')"></select>'+'</td>'+'</tr>'+'</tbody></table>'+'<div>'+'<p class="PICOtherTimes" tid="gtPICOtherTimes">'+getLangM('gtPICOtherTimes')+'</p>'+'<a id="'+PICM.onoff+dev_id+'_save" class="PICSave button nice radius large green" tid="gtSave" onClick="return evaltF_Save('+seq+')">'+getLangM('49')+'</a>'+'</div>';objinfo.html(h);PICM.ui.form.host=eval('document.Dev'+PICM.onoff+dev_id+'.'+PICM.onoff+dev_id+'_Name');PICM.ui.form.sch=eval('document.Dev'+PICM.onoff+dev_id+'.'+PICM.onoff+dev_id+'_ToggleSched');PICM.ui.form.sn_s=eval('document.Dev'+PICM.onoff+dev_id+'.'+PICM.onoff+dev_id+'_SNFrom');PICM.ui.form.sn_e=eval('document.Dev'+PICM.onoff+dev_id+'.'+PICM.onoff+dev_id+'_SNTo');PICM.ui.form.we_s=eval('document.Dev'+PICM.onoff+dev_id+'.'+PICM.onoff+dev_id+'_WEFrom');PICM.ui.form.we_e=eval('document.Dev'+PICM.onoff+dev_id+'.'+PICM.onoff+dev_id+'_WETo');for(var x in SCH_time){s=getLangM(SCH_time[x]);PICM.ui.form.sn_s.options.add(new Option(s,x));PICM.ui.form.we_s.options.add(new Option(s,x));PICM.ui.form.we_e.options.add(new Option(s,x));}
SetFieldValue(PICM.ui.form.sch,PICM.issched);Toggle_schedule(seq);SetFieldValue(PICM.ui.form.sn_s,PICM.sn_st);chgSNF(0,seq);SetFieldValue(PICM.ui.form.sn_e,PICM.sn_ed);SetFieldValue(PICM.ui.form.we_s,PICM.we_st);chgSNF(1,seq);SetFieldValue(PICM.ui.form.we_e,PICM.we_ed);PC_seq[seq]=PICM;}
chg_chk(seq);TogglePICinfo(seq);return false;}
function chgSNF(wkday,seq){var PICM=PC_seq[seq];var cnt=0;var skip=[];if(wkday==0){var SNF_v=getFieldIntVal(PICM.ui.form.sn_s)+1;PICM.ui.form.sn_e.options.length=0;}else{var SNF_v=getFieldIntVal(PICM.ui.form.we_s)+1;PICM.ui.form.we_e.options.length=0;}
for(var x in SCH_time){if(SNF_v){skip.push(''+x);SNF_v--;continue;}
s=getLangM(SCH_time[x]);if(wkday==0)
PICM.ui.form.sn_e.options.add(new Option(s,x));else
PICM.ui.form.we_e.options.add(new Option(s,x));cnt++;}
for(var x in skip){if(x=="1")
s=getLangM(SCH_time[skip[x]])+' '+getLangM('gtNext');else
s=getLangM(SCH_time[skip[x]]);if(wkday==0)
PICM.ui.form.sn_e.options.add(new Option(s,skip[x]));else
PICM.ui.form.we_e.options.add(new Option(s,skip[x]));cnt++;}
chg_chk(seq);}
function chg_chk(seq){var PICM=PC_seq[seq];var upd=-1;for(var x in PICM.ui.form)
{if(PICM.ui.form[x].name)
{objs=PICM.ui.form[x];len=(objs.length)?objs.length:1;for(var k=0;k<len;k++){if(objs.type=="undifined")
objs.type=objs[k].type;if(objs.type=="checkbox")
if(objs.defaultChecked!=objs.checked){upd=1;break;}
if(objs.type=="text")
if(objs.defaultValue!=objs.value){upd=1;break;}
if((objs.type=="select-one")&&(objs[k].defaultSelected==true))
if(objs[k].value!=objs.value){upd=1;break;}}
if(upd!=-1)break;}}
if(upd==1){EnableObject(PICM.ui.save.id);}else{DisableObject(PICM.ui.save.id);}
PICM.inedit=(upd==1)?1:0;}
function getPIC_entry(elm,seq,PIC){var onoff_s=getLangAM(["PIC_S1t007","PIC_S1t008"]);var on_cls='',on_stat=1;var on_str=onoff_s[0];var pc_sch=0;var pc_txt=(PIC.hostlabel!=''?PIC.hostlabel:getLangM('PIC_S1t012'));var pc_host=PIC.host;var pc_idx=PIC.idx;var pc_blockimg='images/btn-Unblocked.png';var pc_mac=PIC.mac;var icon='<img id="'+PIC.onoff+seq+'_clockIcon" src="images/Icon_clock.png" class="PICStatusIcon" alt="Clock">';var h='';var dev_id=PIC.dev_id;if(PIC.idx!=-1){pc_idx=PIC.idx;pc_sch=PIC.issched;}
if(!pc_sch)icon='';h='<form id="'+PIC.onoff+dev_id+'" name="Dev'+PIC.onoff+dev_id+'" onsubmit="return evaltF_Save('+seq+')">'+'<a href="#'+pc_mac+'" id="'+PIC.onoff+dev_id+'_Toggle" class="PICBlockToggle" onClick="return evaltF_TurnOnOff('+seq+')">'+'<div style="display:inline-block; ">'+'<span id="'+PIC.onoff+dev_id+'_BlockModeText" class="PICBlockLabel" tid="PIC-unblocked">'+on_str+'</span>'+'</div>'+'<span class="PICBlockLabel" style="position:relative; visibility: hidden;">Unblocked</span>'+'<br>'+'<img id="'+PIC.onoff+dev_id+'_BlockModeImg" class="PICBlockToggleImg" src="'+pc_blockimg+'" alt="Blocked">'+'</a>'+'<div class="PICName radius6">'+'<div class="PICNameDetail">';h+='<span id="'+PIC.onoff+dev_id+'_Schedule">'+icon+'</span>';h+='<a class="PICDevToggle" href="javascript:void();" id="'+PIC.onoff+dev_id+'_DetailsToggle" style="display:block;" onClick="return showPICInfo('+seq+')">'+'<img src="images/btn-Caret2.png" class="PICCaret" id="'+PIC.onoff+dev_id+'_caret" alt="Caret">'+'</a>'+'<input style="display:none;" type="text" maxlength=32 id="'+PIC.onoff+dev_id+'NameInput" name="'+PIC.onoff+dev_id+'_Name" value="'+pc_host+'" onkeyup="chg_chk('+seq+')">'+'<span class="PICDevName" id="'+PIC.onoff+dev_id+'Name" style="display: inline-block;">'+pc_txt+'</span>'+'<br><span class="MAC">'+pc_mac+'</span>'+'</div>'+'<div class="PICDetails" id="'+PIC.onoff+dev_id+'_details" style="display:none;"></div>';h+='</div>'+'<div id="'+PIC.onoff+dev_id+'_msgSaved" class="PICName radius6 PICMsg" style="opacity:1; display:none; text-align:center; margin: 0px auto; width:300px"></div>'+'</form>';elm.innerHTML=h;}
function findArpHostName(mac){if(ARP_PC[mac])return ARP_PC[mac];return"";}
function findArpByIP(ip){var pc;var pcs=0;if(!ARPentry)return false;while((pc=ARPentry(pcs++))){if(pc.mac=="")continue;if(pc.ifna!="br0")continue;if(ip!=pc.ip)continue;return pc;}
return null;}
function addPCDevice(onoff,mac,host,seq){var idx,pc,PIC;var p_node;var dev_id=(seq+1);var div_id=(onoff=="On")?"UL_ON_PC":"UL_OFF_PC";p_node=$('#'+div_id);PIC=findPICByMac(mac);PIC.onoff=onoff;PIC.dev_id=(seq+1)-((PIC.onoff=="On")?0:(offdevlist));dev_id=PIC.dev_id;PIC.ui={entry:{id:PIC.onoff+dev_id+'_Entry'},sch:{icon:PIC.onoff+dev_id+'_Schedule'},block:{icon:PIC.onoff+dev_id+'_BlockModeImg',txt:PIC.onoff+dev_id+'_BlockModeText'},hostName:{txt:PIC.onoff+dev_id+'Name',input:PIC.onoff+dev_id+'NameInput'},toggle:{icon:PIC.onoff+dev_id+'_caret',detail:PIC.onoff+dev_id+'_details'},save:{id:PIC.onoff+dev_id+'_save',msg:PIC.onoff+dev_id+'_msgSaved'},form:{}};var elm=document.createElement('li');elm.className="PICEntry";elm.style.display="none";elm.id=PIC.ui.entry.id;getPIC_entry(elm,seq,PIC);p_node.append(elm);PIC.ui.form.obj=eval('document.Dev'+PIC.onoff+dev_id);PIC.cbsave=null;PC_seq[seq]=PIC;show_BlockIcon(seq,PIC.block);$('#'+PIC.ui.entry.id).slideDown("slow");}
var pc_alive=null;var devs_list=[];var devs_lst=0;var devs_last_chk=0;var scan_done=0;var ARP_PC=[];function get_Scan_PC(){$.getScript("cgi/cgi_pc_scan.js").done(function(script,textStatus){var sz=cgi_devs_chk_list.length-1;var mac,pc,ip,err;if(sz>devs_last_chk)
{for(var i=devs_last_chk;i<sz;i++){err=0;if(cgi_devs_chk_list[i]){if(cgi_devs_chk_list[i][0]=="DONE"){if(scan_done==2){scan_done=3;}
break;}
var ip=HTML2str(cgi_devs_chk_list[i][0]);var pc=findArpByIP(ip);if(pc&&!pc_alive[ip]){addPCDevice("On",pc.mac,pc.host,devs_lst);pc_alive[ip]=pc.mac;devs_lst++;}else{}}
devs_last_chk=i;}}
if(scan_done==0){scan_done=1;sync_PICM();}
if(scan_done==3){Show_Off_PC();return false;}
setTimeout("check_SCAN_ready()",800);}).fail(function(jqxhr,settings,exception){setTimeout("check_SCAN_ready()",800);});}
var arp_done=-1;function check_SCAN_ready(){if(scan_done>=3)return false;if(scan_done==1){scan_done=2;arp_done=-1;cgi_arp_list=[];cgi_dhcp_list=[];cgi_devs_chk_list=[];}
if(scan_done<2)return setTimeout("check_SCAN_ready()",1000);if(arp_done==1){setTimeout("get_Scan_PC()",1000);}
if(arp_done<0){arp_done=0;$.getScript("cgi/cgi_arp.js").done(function(script,textStatus){arp_done=1;setTimeout("check_SCAN_ready()",1000);}).fail(function(jqxhr,settings,exception){arp_done=-1;setTimeout("check_SCAN_ready()",1000);});}}
var offdevlist=0;function Show_Off_PC(){offdevlist=devs_lst;for(var i=1;i<=MAX_PIC_NUM;i++){pc=get_PIC(i);if(!pc)break;if(pc.mac){var f=0;for(var x in pc_alive){if(pc_alive[x]==pc.mac){f=1;break;}}
if(!f){addPCDevice("Off",pc.mac,pc.host,devs_lst);devs_lst++;}}}
DisplayObject("PIC-S1t005");if(devs_lst>offdevlist)
$("#PIC_recent").slideDown();HiddenObject("arp_wait");}
function get_ICMPScan(){$.getScript("cgi/cgi_devs.js").done(function(script,textStatus){scan_done=1;}).fail(function(jqxhr,settings,exception){scan_done=1;});}
function do_PC_scan(){var scan_begin=200;pc_alive=[];ARP_PC=[];scan_done=0;DisplayObject("arp_wait");devs_lst=0;setTimeout("get_ICMPScan()",scan_begin);setTimeout("check_SCAN_ready()",2000);}
function init(){var f=document.tF;$("[tid='gtSystemSettings']").bind('click',function(){return JumpTo('tl_sys.htm');});if(top.G_ntp==0)
DisplayObject("PIC_noTimeWarning");else
HiddenObject("PIC_noTimeWarning");addModalPage("GUI_PIC-S1d",$("#PIC-S1d").html(),function(){$("#PIC-S1d").html("");$("#PIC-S1da001").click(function(){CloseModalURL();return evaltF_Blockall();});$("#PIC-S1da002").click(function(){return CloseModalURL();});});$("#PIC_blockall").click(function(){return ShowModalInfo("GUI_PIC-S1d",null,{animation:'fadeAndPop',animationspeed:100});});$("#PIC_unblockall").click(function(){return evaltF_noBlockall();});ShowPICMode();ShowNavMenu();setTimeout("do_PC_scan()",100);}
/*END_JS_PACKER*/<%CGI_LOGIN_KEEP();%></script> <script><%CGI_INCLUDE(javascripts/main_footer.js);%></script>